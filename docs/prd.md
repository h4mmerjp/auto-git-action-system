# Product Requirements Document

## Project Overview
階層構造を持つタスク管理機能を備えたプロジェクトスケジュールアプリケーション。プロジェクト内のタスクを親子関係で整理し、スケジュールの依存関係を自動的に管理することで、効率的なプロジェクト管理を実現する。上位タスクのスケジュール変更時に下位タスクのスケジュールを自動調整し、常に論理的な時系列を維持する。

## Goals

### ビジネス目標
- プロジェクト管理の効率化とスケジュール管理の自動化
- タスクの依存関係による scheduling conflicts の削減
- チームの生産性向上とプロジェクト完了率の改善
- スケジュール変更に伴う手動調整作業の削減

### ユーザー目標 
- 複雑なプロジェクトを階層的に整理して管理したい
- タスクのスケジュール変更時に関連タスクを手動で調整する手間を省きたい
- プロジェクト全体の進捗状況を視覚的に把握したい
- チームメンバーとのスケジュール共有を円滑に行いたい

## Features

### 1. プロジェクト管理機能
- プロジェクトの作成・編集・削除
- プロジェクトメタデータ管理（名称、説明、開始日、終了日、担当者）
- プロジェクトステータス管理（企画中、進行中、完了、中止）

### 2. 階層タスク管理機能
- タスクの階層構造作成（親タスク・子タスク・サブタスクの無制限ネスト）
- タスクの基本情報管理（タイトル、説明、優先度、担当者、完了率）
- タスクの並び替え・移動（ドラッグ&ドロップ）
- タスクの複製・削除機能

### 3. 自動スケジュール調整機能
- **コアフィーチャー**: 上位タスクのスケジュール変更時の下位タスク自動調整
- タスク依存関係の自動検証（親タスク開始日 ≤ 子タスク開始日）
- スケジュール競合の自動検出とアラート
- 調整履歴の記録と通知機能

### 4. スケジュール管理機能
- タスクの開始日・終了日・期間設定
- 祝日・休業日を考慮したスケジュール計算
- マイルストーン設定とトラッキング
- スケジュールテンプレートの保存・再利用

### 5. 可視化機能
- ガントチャート表示
- 階層構造ツリービュー
- カレンダービュー
- 進捗ダッシュボード（完了率、遅延タスク、クリティカルパス）

### 6. 協調作業機能
- チームメンバーの招待・権限管理
- タスクへのコメント・ファイル添付
- 変更通知・リマインダー機能
- アクティビティログ

### 7. データ管理機能
- プロジェクトデータのエクスポート（CSV、Excel、PDF）
- テンプレートからのプロジェクト作成
- データバックアップ・復元機能

## Technical Requirements

### フロントエンド
- **フレームワーク**: React 18+ with TypeScript
- **UI コンポーネント**: Material-UI または Ant Design
- **状態管理**: Redux Toolkit または Zustand
- **データ可視化**: D3.js、Chart.js（ガントチャート用）
- **ドラッグ&ドロップ**: react-beautiful-dnd
- **日付処理**: date-fns または Day.js

### バックエンド
- **フレームワーク**: Node.js + Express または Python + FastAPI
- **データベース**: PostgreSQL（階層データ対応）
- **ORM**: Prisma（Node.js）または SQLAlchemy（Python）
- **認証**: JWT + OAuth 2.0（Google、Microsoft）
- **リアルタイム通信**: WebSocket（Socket.io）

### データベース設計
- **Projects テーブル**: プロジェクト基本情報
- **Tasks テーブル**: タスク情報 + parent_id（自己参照外部キー）
- **Users テーブル**: ユーザー情報
- **ProjectMembers テーブル**: プロジェクトメンバー管理
- **TaskAssignments テーブル**: タスク担当者管理
- **ScheduleHistory テーブル**: スケジュール変更履歴

### インフラ・デプロイ
- **クラウド**: AWS または GCP
- **コンテナ**: Docker + Kubernetes
- **CI/CD**: GitHub Actions
- **モニタリング**: CloudWatch、Sentry

### セキュリティ要件
- HTTPS通信の強制
- SQLインジェクション対策
- XSS攻撃対策
- データ暗号化（保存時・転送時）
- アクセスログ記録

### パフォーマンス要件
- ページ読み込み時間: 3秒以内
- 大規模プロジェクト対応: 1000タスク以上
- 同時ユーザー数: 100人以上
- データベースクエリ最適化（インデックス設計）

### ブラウザサポート
- Chrome、Firefox、Safari、Edge（最新2バージョン）
- モバイルブラウザ対応（レスポンシブデザイン）

### APIドキュメント
- OpenAPI/Swagger仕様書
- RESTful API設計
- GraphQL対応（将来的な拡張性のため）
